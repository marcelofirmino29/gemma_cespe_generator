{% extends 'generator/base.html' %}
{% load static %}

{% block title %}Simulado - Questão {{ indice_atual }} de {{ total_questoes }}{% endblock title %}

{% block extra_head %}
    {# Link para CSS externo (se houver) #}
    {# <link rel="stylesheet" href="{% static 'generator/css/simulado_styles.css' %}"> #}
    <style>
        /* Estilos mínimos inline */
        .question-container {
            padding: 1.5rem;
            border: 1px solid var(--bs-border-color);
            border-radius: 0.5rem;
            background-color: var(--bs-tertiary-bg);
            margin-bottom: 1.5rem;
        }
        label { display: block; margin-bottom: 0.25rem; }
    </style>
{% endblock extra_head %}

{% block content %}
    {# Removido header principal #}

    {# Mensagens #}
    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-{% if message.tags %}{{ message.tags }}{% else %}info{% endif %} alert-dismissible fade show small" role="alert"> {# small #}
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        {% endfor %}
    {% endif %}

    {% if questao %}
        {# Container simples para a questão e resposta #}
        <div class="question-container">
            {# Informações da Questão (Simplificado) #}
            <div class="d-flex justify-content-between align-items-center mb-3 border-bottom pb-2">
                 <h1 class="h5 fw-normal mb-0">Simulado - Questão {{ indice_atual }} / {{ total_questoes }}</h1> {# Título menor #}
                 <small class="text-muted">
                    {% if questao.area %}Área: {{ questao.area.nome }} | {% endif %}
                    Dificuldade: {{ questao.get_dificuldade_display|default:"N/D" }}
                 </small>
            </div>

            {# Comando/Afirmação da Questão #}
            <div class="mb-3 fs-6"> {# Fonte um pouco menor que o padrão #}
                {{ questao.texto_comando|linebreaksbr }}
            </div>

            {# --- Formulário de Resposta --- #}
            <hr class="my-3">
            <form method="post" action="{% url 'generator:realizar_simulado' %}" id="simulado-answer-form">
                {% csrf_token %}
                <input type="hidden" name="questao_id" value="{{ questao.id }}">

                <p class="mb-2"><strong>Sua Resposta:</strong></p> {# Removido negrito #}
                {% if questao.tipo == 'CE' %}
                    <div class="form-check mb-2">
                        <input class="form-check-input" type="radio" name="resposta_simulado" id="resp_c" value="C" required>
                        <label class="form-check-label small" for="resp_c"> Certo</label> {# Label pequena #}
                    </div>
                    <div class="form-check mb-3">
                        <input class="form-check-input" type="radio" name="resposta_simulado" id="resp_e" value="E" required>
                        <label class="form-check-label small" for="resp_e"> Errado</label> {# Label pequena #}
                    </div>
                {% else %}
                    <p class="text-danger small">Erro: Tipo de questão inválido para simulado C/E.</p> {# Mensagem pequena #}
                {% endif %}

                {# Botões de Ação #}
                <div class="mt-4 d-flex justify-content-between">
                     <a href="{% url 'generator:dashboard' %}" class="btn btn-outline-danger btn-sm">Abandonar Simulado</a> {# Botão menor #}
                     {% if indice_atual == total_questoes %}
                        <button type="submit" class="btn btn-success btn-sm"> {# Botão menor #}
                            <i class="bi bi-check-circle-fill me-1"></i>Finalizar Simulado
                        </button>
                     {% else %}
                        <button type="submit" class="btn btn-primary btn-sm"> {# Botão menor #}
                            Salvar e Próxima <i class="bi bi-arrow-right-circle-fill ms-1"></i>
                        </button>
                     {% endif %}
                </div>
            </form>
             {# --- Fim Formulário de Resposta --- #}

        </div> {# Fim question-container #}

    {% else %}
        {# Mensagem se não conseguiu carregar questao na view GET #}
        <div class="alert alert-warning">Não foi possível carregar a questão atual do simulado.</div>
        <a href="{% url 'generator:configurar_simulado' %}" class="btn btn-primary btn-sm">Configurar Novo Simulado</a> {# Botão menor #}
    {% endif %}

{% endblock content %}

{% block extra_js %}
    {# Adicionar JS para timer ou outras interatividades do simulado aqui no futuro #}
{% endblock extra_js %}